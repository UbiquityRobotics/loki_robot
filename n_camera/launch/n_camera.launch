<launch>
  <!-- Required arguments: -->
  <arg name="robot_base" />

  <!-- Convenience arguments: -->
  <arg name="root" value="$(find ubiquity_launches)" />
  <arg name="camera_node" default="camera_node" />
  <arg name="calibration_file" default="$(arg robot_base).yaml" />
  <arg name="respawn" default="false" />
  <arg name="DEVICE" default="/dev/video0"/>

  <!-- The GStreamer framerate needs to be an integral fraction -->
  <arg name="WIDTH" default="1280"/>  <!--  Default 640 -->
  <arg name="HEIGHT" default="960"/>  <!--  Default 480 -->
  <arg name="FPS" default="30/1"/>

  <node pkg="nodelet" type="nodelet"
   name="standalone_nodelet" args="manager" output="screen" />

  <node pkg="nodelet" type="nodelet"
   name="$(arg camera_node)"
   args="load gscam/GSCamNodelet standalone_nodelet" output="screen" >
    <param name="camera_name" value="loki2" />

    <param name="camera_info_url"
     value="file://$(arg root)/n_camera/params/$(arg calibration_file)" />

    <param name="gscam_config"
     value="v4l2src device=$(arg DEVICE) ! video/x-raw-rgb,width=$(arg WIDTH),height=$(arg HEIGHT),framerate=$(arg FPS) ! ffmpegcolorspace " />

    <param name="frame_id" value="/raspi_camera_frame"/>
    <param name="sync_sink" value="true" />
    <param name="width" type="int" value="$(arg WIDTH)" />
    <param name="height" type="int" value="$(arg HEIGHT)" />
   </node>                 
</launch>
